<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><link rel="canonical" href="https://chesslablab.github.io/php-chess/play-chess/" />
      <link rel="shortcut icon" href="../img/favicon.ico" />
    <title>Play Chess - PHP Chess</title>
    <link rel="stylesheet" href="../css/theme.css" />
    <link rel="stylesheet" href="../css/theme_extra.css" />
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github.min.css" />
    
      <script>
        // Current page data
        var mkdocs_page_name = "Play Chess";
        var mkdocs_page_input_path = "play-chess.md";
        var mkdocs_page_url = "/php-chess/play-chess/";
      </script>
    
    <!--[if lt IE 9]>
      <script src="../js/html5shiv.min.js"></script>
    <![endif]-->
      <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js"></script>
      <script>hljs.highlightAll();</script> 
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
          <a href=".." class="icon icon-home"> PHP Chess
        </a><div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../search.html" method="get">
      <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="..">Home</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../installation/">Installation</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../getting-started/">Getting Started</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../read-moves/">Read Moves</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../data-conversion/">Data Conversion</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../heuristics/">Heuristics</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../chess-tutor/">Chess Tutor</a>
                </li>
              </ul>
              <ul class="current">
                <li class="toctree-l1 current"><a class="reference internal current" href="./">Play Chess</a>
    <ul class="current">
    <li class="toctree-l2"><a class="reference internal" href="#play-randomly">Play Randomly</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#play-like-a-grandmaster">Play Like a Grandmaster</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#play-computer">Play Computer</a>
    </li>
    </ul>
                </li>
              </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">
      <nav class="wy-nav-top" role="navigation" aria-label="Mobile navigation menu">
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="..">PHP Chess</a>
        
      </nav>
      <div class="wy-nav-content">
        <div class="rst-content"><div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href=".." class="icon icon-home" aria-label="Docs"></a></li>
      <li class="breadcrumb-item active">Play Chess</li>
    <li class="wy-breadcrumbs-aside">
    </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
            <div class="section" itemprop="articleBody">
              
                <h1 id="play-chess">Play Chess</h1>
<h2 id="play-randomly">Play Randomly</h2>
<p>âœ¨ Sometimes you want to play a random game of chess.</p>
<p>You could loop 50 times and play a move by instantiating the <a href="https://github.com/chesslablab/php-chess/blob/main/tests/unit/Computer/RandomMoveTest.php">Chess\Computer\RandomMove</a> class like in the example below.</p>
<pre><code class="language-php">use Chess\Computer\RandomMove;
use Chess\Variant\Classical\Board;

$board = new Board();

for ($i = 0; $i &lt; 50; $i++) {
    if ($move = (new RandomMove($board))-&gt;move()) {
        $board-&gt;play($board-&gt;turn, $move-&gt;pgn);
    }
}

echo $board-&gt;movetext();
</code></pre>
<pre><code class="language-text">1.e4 Nc6 2.Qf3 g6 3.b3 Rb8 4.Bb5 Nh6 5.Ke2 Na5 6.c3 Ng4 7.d3 h6 8.h4 Ra8 9.Kd1 b6 10.Ba4 h5 11.b4 Rh7 12.Bc2 Rh8 13.Ke1 a6 14.Kd1 Nb3 15.d4 Na5 16.g3 c6 17.Ne2 Ne5 18.Nf4 d6 19.Nxg6 Kd7 20.b5 Qe8 21.Na3 e6 22.Bd3 Rb8 23.dxe5 dxe5 24.Bb2 Rg8 25.Qg4 Ra8
</code></pre>
<p>The result obtained is a 24 move game since a move is considered to be completed after both players have played a turn.</p>
<h2 id="play-like-a-grandmaster">Play Like a Grandmaster</h2>
<p>âœ¨ The <a href="https://github.com/chesslablab/chess-server/blob/main/data/players.json">players.json</a> file in the <a href="https://github.com/chesslablab/chess-server">Chess Server</a> contains thousands of games by titled FIDE players. This file can be generated with the command line tools available in the <a href="https://github.com/chesslablab/chess-data">Chess Data</a> repo.</p>
<p><a href="https://github.com/chesslablab/php-chess/blob/main/src/Computer/GrandmasterMove.php">Chess\Computer\GrandmasterMove</a> figures out the next move to be made based on the players.json file that is passed to its constructor.</p>
<pre><code class="language-php">use Chess\Computer\GrandmasterMove;
use Chess\Variant\Classical\Board;

$board = new Board();
$board-&gt;play('w', 'e4');

$gmMove = (new GrandmasterMove(__DIR__.'/../data/json/players.json'))-&gt;move($board);

print_r($gmMove);
</code></pre>
<pre><code class="language-text">stdClass Object
(
    [pgn] =&gt; c5
    [game] =&gt; Array
        (
            [Event] =&gt; Tilburg
            [Site] =&gt; Tilburg
            [Date] =&gt; 1993.??.??
            [White] =&gt; Morozevich, Alexander
            [Black] =&gt; Adams, Michael
            [Result] =&gt; 1-0
            [ECO] =&gt; B23
            [movetext] =&gt; 1.e4 c5 2.Nc3 Nc6 3.f4 g6 4.Nf3 Bg7 5.Bb5 Nd4 6.Nxd4 cxd4 7.Ne2 a6 8.Ba4 b5 9.Bb3 e6 10.O-O Ne7 11.d3 O-O 12.Qe1 f5 13.Bd2 Nc6 14.Kh1 Bb7 15.Ng1 h6 16.Nf3 Kh7 17.Qg3 Qe7 18.Rae1 a5 19.a3 Rab8 20.Nh4 Qf7 21.Qh3 Ba8 22.Rf3 a4 23.Ba2 b4 24.Bc1 b3 25.cxb3 axb3 26.Bb1 d6 27.Bd2 Kg8 28.g4 Ne7 29.gxf5 gxf5 30.Rg3 Kh7 31.Nf3 Bf6 32.Ng5+ Bxg5 33.fxg5 Ng6 34.Qxh6+ Kg8 35.h4 f4 36.Rh3 Rb7 37.h5 Ne5 38.Rg1 Rc7 39.Rh4 Qe8 40.g6
        )

)
</code></pre>
<p>ðŸŽ‰ Let's now put our knowledge of chess openings to the test.</p>
<h2 id="play-computer">Play Computer</h2>
<p>âœ¨ The Universal Chess Interface (UCI) is an open communication protocol that enables chess engines to communicate with user interfaces.</p>
<p>PHP Chess provides the <a href="https://github.com/chesslablab/php-chess/blob/main/tests/unit/UciEngine/UciEngineTest.php">Chess\UciEngine\UciEngine</a> class representing an UCI engine. To follow this tutorial make sure to install Stockfish if you haven't already.</p>
<pre><code class="language-text">sudo apt-get install stockfish
</code></pre>
<p>Then, you are set up to play chess against the computer as described in the following example.</p>
<pre><code class="language-php">use Chess\UciEngine\UciEngine;
use Chess\UciEngine\Details\Limit;
use Chess\Variant\Classical\Board;

$board = new Board();
$board-&gt;play('w', 'e4');

$limit = (new Limit())-&gt;setDepth(3);
$stockfish = (new UciEngine('/usr/games/stockfish'))-&gt;setOption('Skill Level', 9);
$analysis = $stockfish-&gt;analysis($board, $limit);

$board-&gt;playLan('b', $analysis['bestmove']);

echo $board-&gt;movetext();
</code></pre>
<pre><code class="language-text">1.e4 Nf6
</code></pre>
<p>You may want to play against Stockfish starting from a particular FEN with the help of <a href="https://github.com/chesslablab/php-chess/blob/main/tests/unit/FenToBoardFactoryTest.php">Chess\FenToBoardFactory</a>.</p>
<pre><code class="language-php">use Chess\FenToBoardFactory;
use Chess\UciEngine\UciEngine;
use Chess\UciEngine\Details\Limit;

$board = FenToBoardFactory::create('4k2r/pp1b1pp1/8/3pPp1p/P2P1P2/1P3N2/1qr3PP/R3QR1K w k -');

$limit = (new Limit())-&gt;setDepth(12);
$stockfish = (new UciEngine('/usr/games/stockfish'))-&gt;setOption('Skill Level', 20);
$analysis = $stockfish-&gt;analysis($board, $limit);

$board-&gt;playLan('w', $analysis['bestmove']);

echo $board-&gt;movetext();
</code></pre>
<pre><code class="language-text">1.Rb1
</code></pre>
<p>The FEN is converted to a chess board object as described in the <a href="https://chesslablab.github.io/php-chess/data-conversion/#fen-to-board">Data Conversion</a> section. Then Stockfish's depth limit is set to <code>12</code> and the skill level to <code>20</code>.</p>
<p>The same thing goes to starting a game from a particular SAN movetext. As you can see in the example below, <a href="https://github.com/chesslablab/php-chess/blob/main/tests/unit/Play/SanPlayTest.php">Chess\Play\SanPlay</a> is used for this purpose.</p>
<pre><code class="language-php">use Chess\Play\SanPlay;
use Chess\UciEngine\UciEngine;
use Chess\UciEngine\Details\Limit;

$movetext = '1.d4 Nf6 2.c4 c5 3.d5 e6 4.Nc3 exd5 5.cxd5 d6 6.e4 g6 7.Nf3 Bg7';

$board = (new SanPlay($movetext))
    -&gt;validate()
    -&gt;getBoard();

$limit = (new Limit())-&gt;setDepth(12);
$stockfish = (new UciEngine('/usr/games/stockfish'))-&gt;setOption('Skill Level', 20);
$analysis = $stockfish-&gt;analysis($board, $limit);

$board-&gt;playLan('w', $analysis['bestmove']);

echo $board-&gt;movetext();
</code></pre>
<pre><code class="language-text">1.d4 Nf6 2.c4 c5 3.d5 e6 4.Nc3 exd5 5.cxd5 d6 6.e4 g6 7.Nf3 Bg7 8.h3
</code></pre>
<p>ðŸŽ‰ Can you beat the computer? Keep it up!</p>
              
            </div>
          </div><footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="Footer Navigation">
        <a href="../chess-tutor/" class="btn btn-neutral float-left" title="Chess Tutor"><span class="icon icon-circle-arrow-left"></span> Previous</a>
    </div>

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
  </div>

  Built with <a href="https://www.mkdocs.org/">MkDocs</a> using a <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
          
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="Versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    
    
      <span><a href="../chess-tutor/" style="color: #fcfcfc">&laquo; Previous</a></span>
    
    
  </span>
</div>
    <script src="../js/jquery-3.6.0.min.js"></script>
    <script>var base_url = "..";</script>
    <script src="../js/theme_extra.js"></script>
    <script src="../js/theme.js"></script>
      <script src="../search/main.js"></script>
    <script>
        jQuery(function () {
            SphinxRtdTheme.Navigation.enable(true);
        });
    </script>

</body>
</html>
